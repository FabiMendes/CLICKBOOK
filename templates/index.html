<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>ClickBooks</title>
    <link rel="icon" href="img/brand_hello_kitty_icon_158867.png" type="image/png">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Adiciona as folhas de estilo do Slick Carousel -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css" />
    <link rel="stylesheet" type="text/css"
        href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css" />


</head>

<body>

    <div class="header" id="topo">
        <div class="container">
            <div class="navbar">
                <!--CLASSE LOGO E CHAMADA DA LOGO-->
                <div class="logo">
                    <a href="#topo"><img src="https://cdn-icons-png.flaticon.com/512/5999/5999928.png" width="60px"
                            height="55"></a>

                </div>
                <!--NAVEGAÇÃO DA PÁGINA-->
                <nav>
                    <ul>
                        <li><a href="#em-destaque">DESTAQUE</a></li>
                        <li><a href="#sobre">SOBRE</a></li>
                        <li class="dropdown">
                    </ul>
                </nav>
            </div>
            <!--LETREIRO PRINCIPAL-->
            <div class="row">
                <div class="col-2">
                    <h1>Um Passo Para<br>A Leitura Perfeita!</h1>
                    <p>Conecte-se ao conhecimento, <br>
                        Explore infinitas possibilidades!
                    </p>
                    <a href="{{ url_for('front.listar') }}" class="btn">EXPLORAR &#10146;</a>
                </div>
                <!---->
                <div class="col-2">
                    <img src="">
                </div>
            </div>
        </div>
    </div>

<h2 class="titulo" id="recentes">ADICIONADOS RECENTEMENTE</h2>
<br /><br />

<div id="carousel-recentes" class="small-container">
    <div class="row" id="carousel-items">
        <!-- Os livros serão inseridos via JS -->
    </div>
</div>


<div class="small-container">
    <br>
    <h2 class="titulo" id="em-destaque">Mais Alugados</h2>
    <br><br>
    <div class="row">
        {% for livro in livros_populares %}
        <div class="col-4">
            <img onclick="window.location.href='/login'" src="{{ livro.imagem or 'https://via.placeholder.com/150' }}" alt="{{ livro.titulo }}" style="cursor:pointer;">
            <h4 onclick="window.location.href='/login'" style="cursor:pointer;">{{ livro.titulo }}</h4>
            <p>(alugado {{ livro.total_alugueis }} vezes)</p>
        </div>
        {% endfor %}
    </div>
</div>

    <footer>
        <div class="container" id="sobre">
            <div class="footer-content">
                <div class="contacts">
                    <h3>Contatos</h3>
                    <ul>
                        <li>Email: timeclickbooks@gmail.com</li>
                        <li>Telefone: (+55) 11 955544478</li>
                    </ul>
                </div>
                <div class="social-media">
                    <h3>Redes Sociais</h3>
                    <div class="social-media-icons">
                        <a href="https://github.com/seu_usuario_github" target="_blank"><i
                                class="fab fa-github"></i></a>
                        <a href="https://www.linkedin.com/in/seu_usuario_linkedin" target="_blank"><i
                                class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="reclame-aqui">
                    <h3>Reclame Aqui</h3>
                    <a href="https://wa.me/5511977702357">QUERO RECLAMAR</a>
                </div>
            </div>
        </div>
    </footer>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
    <script>
            // Adiciona o comportamento de rolagem suave aos links do menu
            $('a[href*="#"]').on('click', function (e) {
                e.preventDefault();

                $('html, body').animate(
                    {
                        scrollTop: $($(this).attr('href')).offset().top
                    },
                    500,
                    'linear'
                );
            });
    $(document).ready(function () {
    $.ajax({
        url: "{{ url_for('livros.livros_recentes') }}",
        type: "GET",
        success: function (response) {
            let carousel = $("#carousel-recentes");
            carousel.empty(); // limpa antes de inserir

            response.forEach(livro => {
                carousel.append(`
                    <div class="slide-item">
                        <img src="${livro.imagem || 'https://via.placeholder.com/150'}" alt="${livro.titulo}" onclick="window.location.href='/livros/livro/${encodeURIComponent(livro.titulo)}'" />
                        <h4 onclick="window.location.href='/livros/livro/${encodeURIComponent(livro.titulo)}'">${livro.titulo}</h4>
                        <p>${livro.data_cadastro ? new Date(livro.data_cadastro).toLocaleDateString("pt-BR") : ""}</p>
                        <a href="/livros/livro/${encodeURIComponent(livro.titulo)}"><button class="btn-ver-mais">Ver mais</button></a>
                    </div>
                `);
            });

            // Inicializa Slick
            carousel.slick({
                slidesToShow: 4,
                slidesToScroll: 1,
                autoplay: true,
                autoplaySpeed: 2000,
                arrows: true,
                responsive: [
                    { breakpoint: 1024, settings: { slidesToShow: 3 } },
                    { breakpoint: 768, settings: { slidesToShow: 2 } },
                    { breakpoint: 480, settings: { slidesToShow: 1 } }
                ]
            });
        },
        error: function () {
            console.error("Erro ao buscar livros recentes");
        }
    });
});
        
    </script>


</body>

</html>